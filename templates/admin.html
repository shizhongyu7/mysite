{% extends "base.html" %}

{% block title %}管理后台 - {{ t['title'] }}{% endblock %}

{% block content %}
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul class="flash-messages">
        {% for message in messages %}
          <li>{{ message }}</li>
        {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

  <table>
    <tr>
      <th>ID</th>
      <th>用户名</th>
      <th>内容</th>
      <th>时间</th>
      <th>操作</th>
    </tr>
    {% for id, username, text, timestamp in messages %}
    <tr>
      <td>{{ id }}</td>
      <td>{{ username }}</td>
      <td>{{ text }}</td>
      <td>{{ timestamp }}</td>
      <td>
        <form action="{{ url_for('delete', message_id=id) }}?pw={{ pw }}" method="post" style="display:inline;">
          <button type="submit" onclick="return confirm('确认删除？')">删除</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </table>
{% endblock %}